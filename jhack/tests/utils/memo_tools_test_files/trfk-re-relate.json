{
  "scenes": [
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-rc1",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-departed-3292626808515588288",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.180:17070 controller-service.controller-mk8scloud3.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-departed",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "prom/0",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:1",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-departed",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "JUJU_DEPARTING_UNIT": "prom/0",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "f8911036-c5cd-48e8-8a96-73c01d526b84",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-18T07:11:00.703628"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": "null",
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-departed does not exist.\"], {}]": "null",
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": "null",
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": "null",
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_departed.\"], {}]": "null"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": "[1]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[1], {}]": "[]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_remote_app_name": {
            "calls": {
              "[[1], {}]": "\"prom\""
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-rc1",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-broken-4958964008230791774",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.180:17070 controller-service.controller-mk8scloud3.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-broken",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:1",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-broken",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "f8911036-c5cd-48e8-8a96-73c01d526b84",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-18T07:11:01.232274"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": "null",
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-broken does not exist.\"], {}]": "null",
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": "null",
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": "null",
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_broken.\"], {}]": "null",
              "[[\"DEBUG\", \"Wiping the ingress setup for the 'ingress-per-unit:1' relation\"], {}]": "null",
              "[[\"DEBUG\", \"Deleted orphaned /opt/traefik/juju/juju_ingress_ingress-per-unit_1_prom.yaml ingress configuration file\"], {}]": "null"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": "[1]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[1], {}]": "[]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_remote_app_name": {
            "calls": {
              "[[1], {}]": "\"prom\""
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "Client._request": {
            "calls": [
              [
                "[[\"GET\", \"/v1/system-info\"], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": {\"boot-id\": \"78fa2f8c-687f-005f-6011-0c34c304f372\", \"version\": \"unknown\"}}"
              ],
              [
                "[[\"POST\", \"/v1/files\", null, {\"action\": \"remove\", \"paths\": [{\"path\": \"/opt/traefik/juju/juju_ingress_ingress-per-unit_1_prom.yaml\", \"recursive\": true}]}], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": [{\"path\": \"/opt/traefik/juju/juju_ingress_ingress-per-unit_1_prom.yaml\"}]}"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                "[[1, \"ingress\", \"\", true], {}]",
                "null"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-rc1",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-created-399871165108763628",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.180:17070 controller-service.controller-mk8scloud3.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-created",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:2",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-created",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "f8911036-c5cd-48e8-8a96-73c01d526b84",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-18T07:11:06.369424"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": "null",
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-created does not exist.\"], {}]": "null",
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": "null",
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": "null",
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_created.\"], {}]": "null",
              "[[\"DEBUG\", \"Wiping the ingress setup for the 'ingress-per-unit:2' relation\"], {}]": "null",
              "[[\"DEBUG\", \"Deleted orphaned /opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml ingress configuration file\"], {}]": "null"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": "[2]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[2], {}]": "[]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_remote_app_name": {
            "calls": {
              "[[2], {}]": "\"prom\""
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "Client._request": {
            "calls": [
              [
                "[[\"GET\", \"/v1/system-info\"], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": {\"boot-id\": \"78fa2f8c-687f-005f-6011-0c34c304f372\", \"version\": \"unknown\"}}"
              ],
              [
                "[[\"POST\", \"/v1/files\", null, {\"action\": \"remove\", \"paths\": [{\"path\": \"/opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml\", \"recursive\": true}]}], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": [{\"path\": \"/opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml\"}]}"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                "[[2, \"ingress\", \"\", true], {}]",
                "null"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-rc1",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-joined-3499880614711438524",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.180:17070 controller-service.controller-mk8scloud3.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-joined",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "prom/0",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:2",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-joined",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "f8911036-c5cd-48e8-8a96-73c01d526b84",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-18T07:11:06.915743"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": "null",
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-joined does not exist.\"], {}]": "null",
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": "null",
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": "null",
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_joined.\"], {}]": "null",
              "[[\"DEBUG\", \"Updating ingress for relation 'ingress-per-unit:2'\"], {}]": "null",
              "[[\"DEBUG\", \"Updated ingress configuration file: /opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml\"], {}]": "null"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": "[2]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[2], {}]": "[\"prom/0\"]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_get": {
            "calls": [
              [
                "[[2, \"prom/0\", false], {}]",
                "{\"egress-subnets\": \"10.152.183.40/32\", \"host\": \"prom-0.prom-endpoints.foo.svc.cluster.local\", \"ingress-address\": \"10.152.183.40\", \"mode\": \"http\", \"model\": \"foo\", \"name\": \"prom/0\", \"port\": \"9090\", \"private-address\": \"10.152.183.40\"}"
              ],
              [
                "[[2, \"trfk\", true], {}]",
                "{}"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.config_get": {
            "calls": {
              "[[], {}]": "{\"external_hostname\": \"foo.com\", \"routing_mode\": \"path\"}"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "Client._request": {
            "calls": [
              [
                "[[\"GET\", \"/v1/system-info\"], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": {\"boot-id\": \"78fa2f8c-687f-005f-6011-0c34c304f372\", \"version\": \"unknown\"}}"
              ],
              [
                "[[\"GET\", \"/v1/services\", {\"names\": \"traefik\"}], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": [{\"name\": \"traefik\", \"startup\": \"enabled\", \"current\": \"active\"}]}"
              ],
              [
                "[[\"GET\", \"/v1/system-info\"], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": {\"boot-id\": \"78fa2f8c-687f-005f-6011-0c34c304f372\", \"version\": \"unknown\"}}"
              ],
              [
                "[[\"GET\", \"/v1/services\", {\"names\": \"traefik\"}], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": [{\"name\": \"traefik\", \"startup\": \"enabled\", \"current\": \"active\"}]}"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.status_set": {
            "calls": {
              "[[\"maintenance\", \"updating ingress configuration for 'ingress-per-unit:2'\"], {\"is_app\": false}]": "null",
              "[[\"active\", \"\"], {\"is_app\": false}]": "null"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                "[[2, \"ingress\", \"\", true], {}]",
                "null"
              ],
              [
                "[[2, \"ingress\", \"prom/0:\\n  url: http://foo.com:80/foo-prom-0\\n\", true], {}]",
                "null"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "Client.push": {
            "calls": [
              [
                "gASV5AEAAAAAAACMOy9vcHQvdHJhZWZpay9qdWp1L2p1anVfaW5ncmVzc19pbmdyZXNzLXBlci11bml0XzJfcHJvbS55YW1slEJAAQAAgASVNQEAAAAAAABYLgEAAGh0dHA6CiAgcm91dGVyczoKICAgIGp1anUtZm9vLXByb20tMC1yb3V0ZXI6CiAgICAgIGVudHJ5UG9pbnRzOgogICAgICAtIHdlYgogICAgICBydWxlOiBQYXRoUHJlZml4KGAvZm9vLXByb20tMGApCiAgICAgIHNlcnZpY2U6IGp1anUtZm9vLXByb20tMC1zZXJ2aWNlCiAgc2VydmljZXM6CiAgICBqdWp1LWZvby1wcm9tLTAtc2VydmljZToKICAgICAgbG9hZEJhbGFuY2VyOgogICAgICAgIHNlcnZlcnM6CiAgICAgICAgLSB1cmw6IGh0dHA6Ly9wcm9tLTAucHJvbS1lbmRwb2ludHMuZm9vLnN2Yy5jbHVzdGVyLmxvY2FsOjkwOTAKlC6UhpR9lCiMCGVuY29kaW5nlIwFdXRmLTiUjAltYWtlX2RpcnOUiIwLcGVybWlzc2lvbnOUTowHdXNlcl9pZJROjAR1c2VylE6MCGdyb3VwX2lklE6MBWdyb3VwlE51hpQu",
                "null"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "PebblePush",
              "json"
            ]
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-rc1",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-changed-7222302239923624806",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.180:17070 controller-service.controller-mk8scloud3.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-changed",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "prom/0",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:2",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-changed",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "f8911036-c5cd-48e8-8a96-73c01d526b84",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-18T07:11:07.575483"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": "null",
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-changed does not exist.\"], {}]": "null",
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": "null",
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": "null",
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_changed.\"], {}]": "null",
              "[[\"DEBUG\", \"Updating ingress for relation 'ingress-per-unit:2'\"], {}]": "null",
              "[[\"DEBUG\", \"Updated ingress configuration file: /opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml\"], {}]": "null"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": "[2]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[2], {}]": "[\"prom/0\"]"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_get": {
            "calls": [
              [
                "[[2, \"prom/0\", false], {}]",
                "{\"egress-subnets\": \"10.152.183.40/32\", \"host\": \"prom-0.prom-endpoints.foo.svc.cluster.local\", \"ingress-address\": \"10.152.183.40\", \"mode\": \"http\", \"model\": \"foo\", \"name\": \"prom/0\", \"port\": \"9090\", \"private-address\": \"10.152.183.40\"}"
              ],
              [
                "[[2, \"trfk\", true], {}]",
                "{}"
              ]
            ],
            "cursor": 2,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.config_get": {
            "calls": {
              "[[], {}]": "{\"external_hostname\": \"foo.com\", \"routing_mode\": \"path\"}"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "Client._request": {
            "calls": [
              [
                "[[\"GET\", \"/v1/system-info\"], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": {\"boot-id\": \"78fa2f8c-687f-005f-6011-0c34c304f372\", \"version\": \"unknown\"}}"
              ],
              [
                "[[\"GET\", \"/v1/services\", {\"names\": \"traefik\"}], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": [{\"name\": \"traefik\", \"startup\": \"enabled\", \"current\": \"active\"}]}"
              ],
              [
                "[[\"GET\", \"/v1/system-info\"], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": {\"boot-id\": \"78fa2f8c-687f-005f-6011-0c34c304f372\", \"version\": \"unknown\"}}"
              ],
              [
                "[[\"GET\", \"/v1/services\", {\"names\": \"traefik\"}], {}]",
                "{\"type\": \"sync\", \"status-code\": 200, \"status\": \"OK\", \"result\": [{\"name\": \"traefik\", \"startup\": \"enabled\", \"current\": \"active\"}]}"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.status_set": {
            "calls": {
              "[[\"maintenance\", \"updating ingress configuration for 'ingress-per-unit:2'\"], {\"is_app\": false}]": "null",
              "[[\"active\", \"\"], {\"is_app\": false}]": "null"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ],
              [
                "[[], {}]",
                "true"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                "[[2, \"ingress\", \"\", true], {}]",
                "null"
              ],
              [
                "[[2, \"ingress\", \"prom/0:\\n  url: http://foo.com:80/foo-prom-0\\n\", true], {}]",
                "null"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "json",
              "json"
            ]
          },
          "Client.push": {
            "calls": [
              [
                "gASV5AEAAAAAAACMOy9vcHQvdHJhZWZpay9qdWp1L2p1anVfaW5ncmVzc19pbmdyZXNzLXBlci11bml0XzJfcHJvbS55YW1slEJAAQAAgASVNQEAAAAAAABYLgEAAGh0dHA6CiAgcm91dGVyczoKICAgIGp1anUtZm9vLXByb20tMC1yb3V0ZXI6CiAgICAgIGVudHJ5UG9pbnRzOgogICAgICAtIHdlYgogICAgICBydWxlOiBQYXRoUHJlZml4KGAvZm9vLXByb20tMGApCiAgICAgIHNlcnZpY2U6IGp1anUtZm9vLXByb20tMC1zZXJ2aWNlCiAgc2VydmljZXM6CiAgICBqdWp1LWZvby1wcm9tLTAtc2VydmljZToKICAgICAgbG9hZEJhbGFuY2VyOgogICAgICAgIHNlcnZlcnM6CiAgICAgICAgLSB1cmw6IGh0dHA6Ly9wcm9tLTAucHJvbS1lbmRwb2ludHMuZm9vLnN2Yy5jbHVzdGVyLmxvY2FsOjkwOTAKlC6UhpR9lCiMCGVuY29kaW5nlIwFdXRmLTiUjAltYWtlX2RpcnOUiIwLcGVybWlzc2lvbnOUTowHdXNlcl9pZJROjAR1c2VylE6MCGdyb3VwX2lklE6MBWdyb3VwlE51hpQu",
                "null"
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": [
              "PebblePush",
              "json"
            ]
          }
        }
      }
    }
  ]
}