{
  "scenes": [
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-beta4",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-departed-2986716416013396857",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.162:17070 controller-service.controller-mk8scloud.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-departed",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "prom/1",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:2",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-departed",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "JUJU_DEPARTING_UNIT": "prom/1",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "62f2bf65-4e77-445b-85d3-e95b02c2a720",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-13T09:42:36.298278"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": null,
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-departed does not exist.\"], {}]": null,
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": null,
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": null,
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_departed.\"], {}]": null
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": [
                2
              ]
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[2], {}]": []
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_remote_app_name": {
            "calls": {
              "[[2], {}]": "prom"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-beta4",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-broken-1525911699953452418",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.162:17070 controller-service.controller-mk8scloud.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-broken",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:2",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-broken",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "62f2bf65-4e77-445b-85d3-e95b02c2a720",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-13T09:42:36.846257"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": null,
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-broken does not exist.\"], {}]": null,
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": null,
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": null,
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_broken.\"], {}]": null,
              "[[\"DEBUG\", \"Wiping the ingress setup for the 'ingress-per-unit:2' relation\"], {}]": null,
              "[[\"DEBUG\", \"Deleted orphaned /opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml ingress configuration file\"], {}]": null
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": [
                2
              ]
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[2], {}]": []
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_remote_app_name": {
            "calls": {
              "[[2], {}]": "prom"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "Client._request": {
            "calls": [
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "POST",
                    "/v1/files",
                    null,
                    {
                      "action": "remove",
                      "paths": [
                        {
                          "path": "/opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml",
                          "recursive": true
                        }
                      ]
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "path": "/opt/traefik/juju/juju_ingress_ingress-per-unit_2_prom.yaml"
                    }
                  ]
                }
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                [
                  [
                    2,
                    "ingress",
                    "",
                    true
                  ],
                  {}
                ],
                null
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-beta4",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-created-6424414435895681177",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.162:17070 controller-service.controller-mk8scloud.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-created",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:3",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-created",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "62f2bf65-4e77-445b-85d3-e95b02c2a720",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-13T09:42:43.859924"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": null,
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-created does not exist.\"], {}]": null,
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": null,
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": null,
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_created.\"], {}]": null,
              "[[\"DEBUG\", \"Wiping the ingress setup for the 'ingress-per-unit:3' relation\"], {}]": null,
              "[[\"DEBUG\", \"Deleted orphaned /opt/traefik/juju/juju_ingress_ingress-per-unit_3_prom.yaml ingress configuration file\"], {}]": null
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": [
                3
              ]
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[3], {}]": []
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_remote_app_name": {
            "calls": {
              "[[3], {}]": "prom"
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "Client._request": {
            "calls": [
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "POST",
                    "/v1/files",
                    null,
                    {
                      "action": "remove",
                      "paths": [
                        {
                          "path": "/opt/traefik/juju/juju_ingress_ingress-per-unit_3_prom.yaml",
                          "recursive": true
                        }
                      ]
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "path": "/opt/traefik/juju/juju_ingress_ingress-per-unit_3_prom.yaml"
                    }
                  ]
                }
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                [
                  [
                    3,
                    "ingress",
                    "",
                    true
                  ],
                  {}
                ],
                null
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-beta4",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-joined-2962228317980008173",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.162:17070 controller-service.controller-mk8scloud.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-joined",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "prom/1",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:3",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-joined",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "62f2bf65-4e77-445b-85d3-e95b02c2a720",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-13T09:42:44.423458"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": null,
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-joined does not exist.\"], {}]": null,
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": null,
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": null,
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_joined.\"], {}]": null,
              "[[\"DEBUG\", \"Updating ingress for relation 'ingress-per-unit:3'\"], {}]": null,
              "[[\"DEBUG\", \"Updated ingress configuration file: /opt/traefik/juju/juju_ingress_ingress-per-unit_3_prom.yaml\"], {}]": null
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": [
                3
              ]
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[3], {}]": [
                "prom/1"
              ]
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_get": {
            "calls": [
              [
                [
                  [
                    3,
                    "prom/1",
                    false
                  ],
                  {}
                ],
                {
                  "egress-subnets": "10.152.183.197/32",
                  "host": "prom-1.prom-endpoints.foo.svc.cluster.local",
                  "ingress-address": "10.152.183.197",
                  "mode": "http",
                  "model": "foo",
                  "name": "prom/1",
                  "port": "9090",
                  "private-address": "10.152.183.197"
                }
              ],
              [
                [
                  [
                    3,
                    "trfk",
                    true
                  ],
                  {}
                ],
                {}
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.config_get": {
            "calls": {
              "[[], {}]": {
                "external_hostname": "foo.com",
                "routing_mode": "path"
              }
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "Client._request": {
            "calls": [
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/services",
                    {
                      "names": "traefik"
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "name": "traefik",
                      "startup": "enabled",
                      "current": "active"
                    }
                  ]
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/services",
                    {
                      "names": "traefik"
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "name": "traefik",
                      "startup": "enabled",
                      "current": "active"
                    }
                  ]
                }
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.status_set": {
            "calls": {
              "[[\"maintenance\", \"updating ingress configuration for 'ingress-per-unit:3'\"], {\"is_app\": false}]": null,
              "[[\"active\", \"\"], {\"is_app\": false}]": null
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                [
                  [
                    3,
                    "ingress",
                    "",
                    true
                  ],
                  {}
                ],
                null
              ],
              [
                [
                  [
                    3,
                    "ingress",
                    "prom/1:\n  url: http://foo.com:80/foo-prom-1\n",
                    true
                  ],
                  {}
                ],
                null
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-beta4",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-ingress-per-unit-relation-changed-1399769587857169676",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.162:17070 controller-service.controller-mk8scloud.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/ingress-per-unit-relation-changed",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_REMOTE_UNIT": "prom/1",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "JUJU_RELATION": "ingress-per-unit",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "JUJU_RELATION_ID": "ingress-per-unit:3",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "ingress-per-unit-relation-changed",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "62f2bf65-4e77-445b-85d3-e95b02c2a720",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_REMOTE_APP": "prom"
        },
        "timestamp": "2022-10-13T09:42:45.105974"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": null,
              "[[\"DEBUG\", \"Legacy hooks/ingress-per-unit-relation-changed does not exist.\"], {}]": null,
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": null,
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": null,
              "[[\"DEBUG\", \"Emitting Juju event ingress_per_unit_relation_changed.\"], {}]": null,
              "[[\"DEBUG\", \"Updating ingress for relation 'ingress-per-unit:3'\"], {}]": null,
              "[[\"DEBUG\", \"Updated ingress configuration file: /opt/traefik/juju/juju_ingress_ingress-per-unit_3_prom.yaml\"], {}]": null
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": [
                3
              ]
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[3], {}]": [
                "prom/1"
              ]
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_get": {
            "calls": [
              [
                [
                  [
                    3,
                    "prom/1",
                    false
                  ],
                  {}
                ],
                {
                  "egress-subnets": "10.152.183.197/32",
                  "host": "prom-1.prom-endpoints.foo.svc.cluster.local",
                  "ingress-address": "10.152.183.197",
                  "mode": "http",
                  "model": "foo",
                  "name": "prom/1",
                  "port": "9090",
                  "private-address": "10.152.183.197"
                }
              ],
              [
                [
                  [
                    3,
                    "trfk",
                    true
                  ],
                  {}
                ],
                {}
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.config_get": {
            "calls": {
              "[[], {}]": {
                "external_hostname": "foo.com",
                "routing_mode": "path"
              }
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "Client._request": {
            "calls": [
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/services",
                    {
                      "names": "traefik"
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "name": "traefik",
                      "startup": "enabled",
                      "current": "active"
                    }
                  ]
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/services",
                    {
                      "names": "traefik"
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "name": "traefik",
                      "startup": "enabled",
                      "current": "active"
                    }
                  ]
                }
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.status_set": {
            "calls": {
              "[[\"maintenance\", \"updating ingress configuration for 'ingress-per-unit:3'\"], {\"is_app\": false}]": null,
              "[[\"active\", \"\"], {\"is_app\": false}]": null
            },
            "cursor": 0,
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                [
                  [
                    3,
                    "ingress",
                    "",
                    true
                  ],
                  {}
                ],
                null
              ],
              [
                [
                  [
                    3,
                    "ingress",
                    "prom/1:\n  url: http://foo.com:80/foo-prom-1\n",
                    true
                  ],
                  {}
                ],
                null
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          }
        }
      }
    },
    {
      "event": {
        "env": {
          "JUJU_UNIT_NAME": "trfk/0",
          "KUBERNETES_PORT": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT": "443",
          "JUJU_VERSION": "3.0-beta4",
          "JUJU_CHARM_HTTP_PROXY": "",
          "APT_LISTCHANGES_FRONTEND": "none",
          "JUJU_CONTEXT_ID": "trfk/0-update-status-8231415363078597241",
          "JUJU_AGENT_SOCKET_NETWORK": "unix",
          "JUJU_API_ADDRESSES": "10.152.183.162:17070 controller-service.controller-mk8scloud.svc.cluster.local:17070",
          "JUJU_CHARM_HTTPS_PROXY": "",
          "JUJU_AGENT_SOCKET_ADDRESS": "@/var/lib/juju/agents/unit-trfk-0/agent.socket",
          "JUJU_MODEL_NAME": "foo",
          "JUJU_DISPATCH_PATH": "hooks/update-status",
          "JUJU_AVAILABILITY_ZONE": "",
          "JUJU_CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm",
          "TERM": "tmux-256color",
          "KUBERNETES_PORT_443_TCP_ADDR": "10.152.183.1",
          "PATH": "/var/lib/juju/tools/unit-trfk-0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/charm/bin",
          "KUBERNETES_PORT_443_TCP_PORT": "443",
          "JUJU_METER_STATUS": "AMBER",
          "KUBERNETES_PORT_443_TCP_PROTO": "tcp",
          "JUJU_HOOK_NAME": "update-status",
          "LANG": "C.UTF-8",
          "CLOUD_API_VERSION": "1.25.0",
          "DEBIAN_FRONTEND": "noninteractive",
          "JUJU_SLA": "unsupported",
          "KUBERNETES_PORT_443_TCP": "tcp://10.152.183.1:443",
          "KUBERNETES_SERVICE_PORT_HTTPS": "443",
          "JUJU_MODEL_UUID": "62f2bf65-4e77-445b-85d3-e95b02c2a720",
          "KUBERNETES_SERVICE_HOST": "10.152.183.1",
          "JUJU_MACHINE_ID": "",
          "JUJU_CHARM_FTP_PROXY": "",
          "JUJU_METER_INFO": "not set",
          "PWD": "/var/lib/juju/agents/unit-trfk-0/charm",
          "JUJU_PRINCIPAL_UNIT": "",
          "JUJU_CHARM_NO_PROXY": "127.0.0.1,localhost,::1",
          "PYTHONPATH": "lib:venv",
          "CHARM_DIR": "/var/lib/juju/agents/unit-trfk-0/charm"
        },
        "timestamp": "2022-10-13T09:47:04.956642"
      },
      "context": {
        "memos": {
          "_ModelBackend.juju_log": {
            "calls": {
              "[[\"DEBUG\", \"Operator Framework 1.5.2 up and running.\"], {}]": null,
              "[[\"DEBUG\", \"Legacy hooks/update-status does not exist.\"], {}]": null,
              "[[\"DEBUG\", \"yaml does not have libyaml extensions, using slower pure Python yaml loader\"], {}]": null,
              "[[\"DEBUG\", \"Using local storage: /var/lib/juju/agents/unit-trfk-0/charm/.unit-state.db already exists\"], {}]": null,
              "[[\"DEBUG\", \"Emitting Juju event update_status.\"], {}]": null,
              "[[\"DEBUG\", \"Updating ingress for relation 'ingress-per-unit:3'\"], {}]": null,
              "[[\"DEBUG\", \"Updated ingress configuration file: /opt/traefik/juju/juju_ingress_ingress-per-unit_3_prom.yaml\"], {}]": null
            },
            "cursor": "n/a",
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.config_get": {
            "calls": {
              "[[], {}]": {
                "external_hostname": "foo.com",
                "routing_mode": "path"
              }
            },
            "cursor": "n/a",
            "caching_policy": "loose",
            "serializer": "json"
          },
          "Client._request": {
            "calls": [
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/services",
                    {
                      "names": "traefik"
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "name": "traefik",
                      "startup": "enabled",
                      "current": "active"
                    }
                  ]
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/system-info"
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": {
                    "boot-id": "ae659017-623e-660f-f157-8fcecb60d695",
                    "version": "unknown"
                  }
                }
              ],
              [
                [
                  [
                    "GET",
                    "/v1/services",
                    {
                      "names": "traefik"
                    }
                  ],
                  {}
                ],
                {
                  "type": "sync",
                  "status-code": 200,
                  "status": "OK",
                  "result": [
                    {
                      "name": "traefik",
                      "startup": "enabled",
                      "current": "active"
                    }
                  ]
                }
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.status_set": {
            "calls": {
              "[[\"maintenance\", \"updating ingress configurations\"], {\"is_app\": false}]": null,
              "[[\"maintenance\", \"updating ingress configuration for 'ingress-per-unit:3'\"], {\"is_app\": false}]": null,
              "[[\"active\", \"\"], {\"is_app\": false}]": null
            },
            "cursor": "n/a",
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_ids": {
            "calls": {
              "[[\"ingress-per-unit\"], {}]": [
                3
              ],
              "[[\"ingress\"], {}]": []
            },
            "cursor": "n/a",
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_list": {
            "calls": {
              "[[3], {}]": [
                "prom/1"
              ]
            },
            "cursor": "n/a",
            "caching_policy": "loose",
            "serializer": "json"
          },
          "_ModelBackend.relation_get": {
            "calls": [
              [
                [
                  [
                    3,
                    "prom/1",
                    false
                  ],
                  {}
                ],
                {
                  "egress-subnets": "10.152.183.197/32",
                  "host": "prom-1.prom-endpoints.foo.svc.cluster.local",
                  "ingress-address": "10.152.183.197",
                  "mode": "http",
                  "model": "foo",
                  "name": "prom/1",
                  "port": "9090",
                  "private-address": "10.152.183.197"
                }
              ],
              [
                [
                  [
                    3,
                    "trfk",
                    true
                  ],
                  {}
                ],
                {}
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.is_leader": {
            "calls": [
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ],
              [
                [
                  [],
                  {}
                ],
                true
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          },
          "_ModelBackend.relation_set": {
            "calls": [
              [
                [
                  [
                    3,
                    "ingress",
                    "",
                    true
                  ],
                  {}
                ],
                null
              ],
              [
                [
                  [
                    3,
                    "ingress",
                    "prom/1:\n  url: http://foo.com:80/foo-prom-1\n",
                    true
                  ],
                  {}
                ],
                null
              ]
            ],
            "cursor": 0,
            "caching_policy": "strict",
            "serializer": "json"
          }
        }
      }
    }
  ]
}